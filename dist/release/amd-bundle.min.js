var __extends=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();if(void 0===makeid)var makeid=function(t){for(var e="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=r.length,n=0;n<t;n++)e+=r.charAt(Math.floor(Math.random()*o));return e};var formFieldBuild,storageKey=location.pathname.replace(/\/$/s,"")+"/formField",formSaved=localStorage.getItem(storageKey.toString()),formField=formFieldBuild=formSaved?JSON.parse(formSaved):[],uniqueid=makeid(5),isBrowser=new Function("try {return this===window;}catch(e){ return false;}"),Count=-1;if("undefined"==typeof Storage)var Storage_1=function(){};var lStorage=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.has=function(t){return!!localStorage[t]&&!!localStorage[t].length},e.prototype.get=function(t){if(!this.has(t))return!1;var e=localStorage[t];try{return JSON.parse(e)}catch(t){return e}},e.prototype.set=function(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch(r){localStorage.setItem(t,e)}},e.prototype.extend=function(t,e){if(this.has(t)){var r=this.get(t);"undefined"!=typeof jQuery&&$.extend(r,JSON.parse(JSON.stringify(e))),this.set(t,r)}else this.set(t,e)},e.prototype.remove=function(t){localStorage.removeItem(t)},e}(Storage),formSaver2=function(){function t(){}return t.save=function(e){var r=this.get_identifier(e),o=e.value,n=!e.hasAttribute("no-save")&&e.hasAttribute("aria-formsaver");if(r&&""!==o&&n){if("checkbox"==e.getAttribute("type"))return localStorage.setItem(r,(1==e.checked).toString()),void console.log("save checkbox button ",t.offset(e));if("radio"==e.getAttribute("type")&&e.hasAttribute("id"))return $('[name="'+e.getAttribute("name")+'"]').each((function(t,e){localStorage.setItem(r,"off")})),void setTimeout((function(){localStorage.setItem(r,o.toString()),console.log("save radio button ",t.offset(e))}),500);localStorage.setItem(r,o.toString())}},t.offset=function(t){return t.getBoundingClientRect()},t.hasAttribute=function(t,e){return 1===t.nodeType&&t.hasAttribute(e)},t.restore=function(t){t instanceof jQuery&&(t=t.get(0));t.nodeType;if(Count++,!t.hasAttribute("no-save")){var e;t.setAttribute("aria-formsaver",uniqueid);var r=this.get_identifier(t),o=t.getAttribute("type");if(r){if("checkbox"===o){if(null===(e=JSON.parse(localStorage.getItem(r))))return;return console.log("value checkbox "+e),void(t.checked=e)}if("radio"===o)return e="on"===localStorage.getItem(r),void(t.checked=e);if(null===(e=localStorage.getItem(r))||!e.toString().length)return;t.value=e,this.is_select2(t)&&$(t).val(e).trigger("change")}}},t.is_select2=function(t){return this.is_jquery()&&$(t).data("select2")},t.is_jquery=function(){return"undefined"!=typeof jQuery},t.get_identifier=function(t){if(console.log(t.getAttribute("id")),t.hasAttribute("id")){if("null"==t.getAttribute("id")){e=makeid(5);t.setAttribute("id",e),formField[Count]=e,localStorage.setItem(storageKey.toString(),JSON.stringify(formField))}}else{if(Count in formField)t.setAttribute("id",formField[Count]);else{var e=makeid(5);t.setAttribute("id",e),formField[Count]=e,localStorage.setItem(storageKey.toString(),JSON.stringify(formField))}Count++}return location.pathname+t.getAttribute("id")},t}();function formsaver(){"undefined"!=typeof jQuery&&(console.log("Starting smartform jQuery"),"undefined"!=typeof jQuery&&jQuery("input,textarea,select").each((function(t,e){$(this).smartForm()})))}isBrowser()&&"undefined"!=typeof jQuery&&function(t){t.fn.getIDName=function(){return t(this).attr("aria-autovalue")&&t(this).val(uniqueid).trigger("change"),formSaver2.get_identifier(this)},t.fn.has_attr=function(e){var r=t(this).attr(e);return void 0!==r&&!1!==r},t.fn.smartForm=function(){Count++,formSaver2.restore(t(this).get(0))},t.arrive=function(e,r){e?t(e).bind("DOMNodeInserted",r):"function"==typeof r?t(document).bind("DOMNodeInserted",r):"function"==typeof e&&t(document).bind("DOMNodeInserted",e)},t(document).bind("DOMNodeInserted",(function(){switch(t(this).prop("tagName")){case"SELECT":case"INPUT":case"TEXTAREA":formSaver2.restore(t(this).get(0))}})),t(document).bind("DOMNodeRemoved",(function(){var e=t(this);if(!e.attr("no-save")&&e.attr("aria-formsaver"))switch(e.prop("tagName")){case"SELECT":case"INPUT":case"TEXTAREA":e.off("change")}})),t(document).on("change","select, input, textarea",(function(t){formSaver2.save(this)})),t(document).on("focus","input,textarea,select",(function(){var e=t(this);e.getIDName();var r=e.attr("aria-formsaver");r&&r!=uniqueid&&(e.smartForm(),e.attr("aria-formsaver",uniqueid))}))}(jQuery),define("main",["require","exports","./_conf","./formSaver2","./jquery-saver"],(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})}));